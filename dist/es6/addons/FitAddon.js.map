{"version":3,"file":"FitAddon.js","sources":["../../../addons/addon-fit/out-es6/FitAddon.js"],"sourcesContent":["const MINIMUM_COLS = 2;\nconst MINIMUM_ROWS = 1;\nexport class FitAddon {\n    activate(terminal) {\n        this._terminal = terminal;\n    }\n    dispose() { }\n    fit() {\n        const dims = this.proposeDimensions();\n        if (!dims || !this._terminal || isNaN(dims.cols) || isNaN(dims.rows)) {\n            return;\n        }\n        const core = this._terminal._core;\n        if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {\n            core._renderService.clear();\n            this._terminal.resize(dims.cols, dims.rows);\n        }\n    }\n    proposeDimensions() {\n        if (!this._terminal) {\n            return undefined;\n        }\n        if (!this._terminal.element || !this._terminal.element.parentElement) {\n            return undefined;\n        }\n        const core = this._terminal._core;\n        const dims = core._renderService.dimensions;\n        if (dims.css.cell.width === 0 || dims.css.cell.height === 0) {\n            return undefined;\n        }\n        const scrollbarWidth = this._terminal.options.scrollback === 0 ?\n            0 : core.viewport.scrollBarWidth;\n        const parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);\n        const parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n        const parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n        const elementStyle = window.getComputedStyle(this._terminal.element);\n        const elementPadding = {\n            top: parseInt(elementStyle.getPropertyValue('padding-top')),\n            bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n            right: parseInt(elementStyle.getPropertyValue('padding-right')),\n            left: parseInt(elementStyle.getPropertyValue('padding-left'))\n        };\n        const elementPaddingVer = elementPadding.top + elementPadding.bottom;\n        const elementPaddingHor = elementPadding.right + elementPadding.left;\n        const availableHeight = parentElementHeight - elementPaddingVer;\n        const availableWidth = parentElementWidth - elementPaddingHor - scrollbarWidth;\n        const geometry = {\n            cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / dims.css.cell.width)),\n            rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / dims.css.cell.height))\n        };\n        return geometry;\n    }\n}\n//# sourceMappingURL=FitAddon.js.map"],"names":[],"mappings":"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"}